.Nav-container {
  position: relative;

  &.is-flyout {
    z-index: 10;
  }
}

.Nav {
  transition: all ease 300ms;
  background-color: color-primary(9);
  display: flex;
  flex-direction: column;
  min-width: scaleGrid(25);
  max-width: scaleGrid(30);
  z-index: 15;

  &.is-flyout {
    background-color: white;
    color: black;
    box-shadow: 4px 1px 10px #00000050;
    position: relative;

    .Nav-header {
      border-bottom: 1px solid color-neutral(4);

      &:hover {
        cursor: pointer;
        background-color: color-neutral(2);
        transition: all ease 200ms
      }
    }

    a {
      color: black;
      display: block;
      width: 100%;
    }
  }

  .Nav-sectionHeading {
    padding: 8px;
    border-bottom: 1px solid color-neutral(4);
  }

  .Nav-topLevelHeading {
    padding: 6px 8px;
    border-radius: 5px;
    border-bottom: 1px solid color-neutral(4);

    &:hover {
      background-color: color-neutral(3);
    }
  }

  .Nav-node {
    padding: 0.75rem 1rem 0.75rem 1.75rem;
    cursor: pointer;
    align-items: center;
    border-bottom: 1px solid color-neutral(4);

    span.Nav-nodeTitle {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    &.Nav-wrapped {
      padding: 0;

      > * {
        padding: 1rem 1.75rem;
        display: block;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
    }

    .Nav-child {
      padding: 1rem 1.75rem;
      background-color: color-neutral(1);
      border: 0;
      transition: all ease 200ms;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;

      &:hover {
        background-color: color-neutral(3);
      }
    }

    .Nav-selected {
      color: color-primary(6);
      border-top: 1px solid color-primary(6);
      border-bottom: 1px solid color-primary(6);
    }

    .Icon {
      transform: rotate(-90deg);
      transition: all ease 200ms;
    }

    &.Nav-hasChildren {
      position: relative;

      .Icon {
        position: absolute;
        top: calc(50% - 9px);
        left: 0.75rem;
      }
    }
  }

  .Node-expanded.Icon {
    transform: rotate(0deg);
  }

  .Nav-item {
    color: color-neutral(5);
    white-space: nowrap;
  }

  .Icon {
    height: 1em;
    width: 1em;
    margin-right: scaleGrid(1);
    transition: transform ease 300ms;
  }

  &.is-collapsed {
    max-width: scaleGrid(8);
    min-width: scaleGrid(8);
    .Nav-item {
      text-align: center;
    }
    .Nav-itemTitle {
      display: none !important;
    }
    .Nav-caret {
      display: none !important;
    }
    .Icon {
      margin-right: 0;
    }

    .Nav-header {
      height: 57px;
      margin: 0 auto;
      padding: scaleGrid(2);
      cursor: default;
    }

    .Nav-footer {
      .Icon {
        transform: rotate(180deg);
      }
    }
  }
}

.is-flyout {
  .Nav-header {
    color: black;

    .Icon {
      transform: rotate(180deg);
    }
  }
}

.Nav-header {
  display: flex;
  align-items: center;
  border-bottom: 1px solid color-primary(8);
  padding: scaleGrid(2);
  color: color-neutral(1);
  font-size: 0.875rem;
  max-height: 65px;

  &:hover {
    cursor: pointer;
    background-color: color-primary(8);
    transition: all ease 200ms;
  }

  .Nav-itemTitle,
  .Nav-itemSubtitle {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .Nav-itemSubtitle {
    color: color-neutral(7);
    font-size: 0.6875rem;
    display: block;
    font-weight: normal;
  }

  .Icon {
    transition: transform ease 300ms;
  }
}

.Nav-body {
  flex: 1 1 0% !important;
  flex-basis: 0% !important;
}

.Nav-headerIcon {
  width: scaleGrid(3);
  display: block;
}

.Nav-caret {
  width: 15px;
  display: block;
}

.Nav-sectionItems {
  ul.Nav-single {
    > li {
      > .Nav-node {
        @extend .u-hiddenVisually;
      }
    }
  }

  ul.Nav-multi {
    .Nav-submenu {
      height: 0;
      overflow: hidden; 

      &.isActive {
        height: auto;
      }
    }
  }

  li {
    list-style: none;
  }

  > ul > li > ul > li > ul {
    overflow: hidden;
    height: 0;

    &.isActive {
      height: auto;
      border-bottom: 1px solid color-neutral(4);
    }

    > li {
      > .Nav-node {
        padding: 1rem 1.75rem;
        background-color: color-neutral(1);
        border: 0;
        transition: all ease 200ms;

        &:hover {
          background-color: color-neutral(3);
        }
      }
    }
  }
}

.Nav-footer {
  white-space: nowrap;
  border-top: 1px solid color-primary(8);
  cursor: pointer;
  padding: (scaleGrid(3) / 2) scaleGrid(3);
  color: color-neutral(1);
  .Icon {
    transition: transform 0.2s ease-in-out;
  }
}

.Nav-item {
  background-color: color-primary(9);
  border-radius: 5px;
  cursor: pointer;
  list-style: none;
  margin: scaleGrid(3) 12px;
  padding: 6px 12px;
  user-select: none;

  &:hover {
    background-color: color-primary(8);
    color: color-primary(1);
    transition: all ease 200ms;
  }

  &:active {
    background-color: color-primary(6);
  }

  &.is-active {
    background-color: color-primary(6);
    color:color-neutral(1);
    font-weight: bold;

    a {
      color:color-neutral(1);
    }
  }
}

.Nav-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  opacity: 0.25;
  background-color: scaleColor($ts-black, 4);
}
